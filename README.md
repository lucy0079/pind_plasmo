# Pind Plasmo: 웹에 나만의 핀을 꽂으세요 (브라우저 확장 프로그램)

Pind Plasmo는 현재 보고 있는 웹 페이지에 핀을 꽂아 나중에 다시 보거나 다른 사람과 공유할 수 있는 브라우저 확장 프로그램입니다. 중요한 정보나 흥미로운 콘텐츠를 발견했을 때, Pind를 사용하여 해당 위치에 가상 핀을 추가하고, 언제든지 쉽게 다시 방문하거나 관리할 수 있습니다.

## 주요 기능

*   **간편한 핀 추가**: 클릭 한 번으로 현재 페이지에 핀을 추가할 수 있습니다. (예: 특정 문단, 이미지, 비디오 등)
*   **로그인 및 인증**: 이메일과 비밀번호를 사용한 사용자 등록 및 로그인을 지원합니다.
*   **JWT 토큰 기반 인증**: 로그인 성공 시 백엔드 서버로부터 JWT(JSON Web Token)를 발급받아 `chrome.storage.local`에 안전하게 저장하고, 이를 사용하여 인증된 요청을 백엔드에 전송합니다.
*   **비밀번호 찾기 기능**: 이메일을 통해 비밀번호 재설정 링크를 요청할 수 있는 기능을 제공합니다. (백엔드 지원 필요)
*   **백엔드 연동**: FastAPI 기반의 백엔드 서버와 통신하여 사용자 인증 및 유튜브 비디오의 위치 정보 추출과 같은 핵심 기능을 수행합니다.
*   **핀 목록 관리**: 확장 프로그램 팝업 창에서 추가한 핀 목록을 한눈에 확인하고, 핀을 클릭하여 해당 페이지로 이동하거나 삭제할 수 있습니다.
*   **백그라운드 데이터 관리**: 핀 데이터는 확장 프로그램 백그라운드에서 효율적으로 관리되어, 브라우저를 닫았다 열어도 핀 정보가 유지됩니다.
*   **자동 배포**: GitHub Actions를 통해 Chrome 웹 스토어에 자동으로 배포되는 CI/CD 파이프라인이 구축되어 있습니다.

## 기술 스택

*   **프레임워크**: [Plasmo](https://www.plasmo.com/) (브라우저 확장 프로그램 개발 프레임워크)
*   **UI 라이브러리**: [React](https://reactjs.org/) (UI 컴포넌트 개발)
*   **언어**: [TypeScript](https://www.typescriptlang.org/) (정적 타입 지원 JavaScript)
*   **백엔드**: [FastAPI](https://fastapi.tiangolo.com/) (Python 기반의 고성능 웹 프레임워크, 인증 및 데이터 처리)
*   **패키지 매니저**: [pnpm](https://pnpm.io/) (빠르고 효율적인 패키지 관리)
*   **CI/CD**: [GitHub Actions](https://github.com/features/actions) (자동화된 빌드 및 배포)
*   **코드 포맷터**: [Prettier](https://prettier.io/) (일관된 코드 스타일 유지)

## 시작하기

### 사전 요구 사항

*   [Node.js](https://nodejs.org/ko/) (v16.14.0 이상 권장)
*   [pnpm](https://pnpm.io/installation) (글로벌 설치 권장: `npm install -g pnpm`)
*   **백엔드 서버**: 이 확장 프로그램은 별도의 FastAPI 백엔드 서버와 통신합니다. 백엔드 서버가 `http://localhost:8000`에서 실행 중이어야 합니다.

### 백엔드 서버 설정 및 실행

이 확장 프로그램은 `http://localhost:8000`에서 실행되는 FastAPI 백엔드 서버와 연동됩니다. 백엔드 서버가 준비되어 있지 않다면, 다음 단계를 따라 설정하고 실행해야 합니다.

1.  **백엔드 저장소 복제 및 설정**:
    *   백엔드 서버 코드가 있는 저장소를 복제합니다. (예: `git clone [백엔드 저장소 URL]`)
    *   해당 디렉토리로 이동하여 필요한 Python 의존성을 설치합니다 (`pip install -r requirements.txt` 또는 필요한 패키지 개별 설치).
    *   데이터베이스 설정 및 마이그레이션을 수행합니다.
2.  **백엔드 서버 실행**:
    *   백엔드 서버 디렉토리에서 다음 명령어를 사용하여 서버를 실행합니다.
    ```bash
    uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
    ```
    (여기서 `app.main:app`은 FastAPI 애플리케이션의 진입점 파일과 변수명에 따라 다를 수 있습니다.)

### 프론트엔드 (확장 프로그램) 설치 및 실행

1.  **저장소 복제**:
    ```bash
    git clone https://github.com/lucy0079/login_pind_plasmo.git
    cd login_pind_plasmo
    ```

2.  **의존성 설치**:
    ```bash
    pnpm install
    ```

3.  **개발 서버 실행**:
    ```bash
    pnpm dev
    ```
    이 명령은 개발 모드로 확장 프로그램을 빌드하고, 변경 사항을 감지하여 자동으로 리로드합니다.

4.  **브라우저에 확장 프로그램 추가 (개발 모드)**:
    *   Chrome/Edge 브라우저를 엽니다.
    *   주소창에 `chrome://extensions` (Chrome) 또는 `edge://extensions` (Edge)를 입력하여 확장 프로그램 관리 페이지로 이동합니다.
    *   페이지 우측 상단 또는 좌측 상단에 있는 **개발자 모드** 토글을 활성화합니다.
    *   **압축 해제된 확장 프로그램을 로드합니다.** 버튼을 클릭합니다.
    *   프로젝트 루트 디렉토리 내의 `build/chrome-mv3-dev` 디렉토리를 선택합니다.
    *   이제 브라우저 툴바에 Pind 확장 프로그램 아이콘이 나타납니다.

## 프로젝트 구조 및 파일 상세 설명

이 프로젝트는 Plasmo 프레임워크를 기반으로 하며, 브라우저 확장 프로그램의 핵심 구성 요소인 `background`, `content`, `popup` 스크립트를 포함합니다.

```
.
├── .github/workflows/submit.yml
├── assets/
├── build/
├── .gitignore
├── .prettierrc.mjs
├── background.ts
├── content.css
├── content.tsx
├── global.d.ts
├── login.css
├── login.tsx
├── package.json
├── pnpm-lock.yaml
├── popup.css
├── popup.tsx
├── README.md
└── tsconfig.json
```

---

### 📂 `.github/workflows/submit.yml`
**역할**: 지속적 통합 및 배포(CI/CD) 파이프라인을 정의하는 GitHub Actions 워크플로우 파일입니다.
**상세 설명**: 이 파일은 `main` 브랜치에 코드가 푸시될 때마다 자동으로 실행됩니다. 전체 프로세스는 1) 코드를 체크아웃하고, 2) pnpm을 설정하며, 3) 의존성을 설치하고, 4) Plasmo를 사용하여 프로덕션용으로 확장 프로그램을 빌드한 후, 5) 최종적으로 빌드된 파일을 Chrome 웹 스토어에 제출(배포)하는 과정을 포함합니다. 이를 통해 수동 배포의 번거로움을 없애고 일관성 있는 배포를 보장합니다.

### 📂 `assets/`
**역할**: 확장 프로그램 전반에서 사용되는 정적 자원(이미지, 아이콘 등)을 보관하는 디렉토리입니다.
**상세 설명**: `icon.png`는 브라우저 툴바 및 확장 프로그램 관리 페이지에 표시될 대표 아이콘입니다. `location.png`와 같은 다른 이미지들은 팝업 UI나 콘텐츠 스크립트에서 특정 기능을 시각적으로 나타내기 위해 사용될 수 있습니다. 웹 스토어 제출 시 다양한 크기의 아이콘이 필요하며, Plasmo는 빌드 과정에서 이 대표 아이콘을 기반으로 필요한 모든 크기의 아이콘을 자동으로 생성해줍니다.

### 📂 `build/`
**역할**: `pnpm dev` 또는 `pnpm build` 명령 실행 시 생성되는 빌드 결과물이 저장되는 디렉토리입니다.
**상세 설명**: 이 디렉토리의 내용은 실제 브라우저가 로드하여 실행하는 확장 프로그램의 모든 파일을 포함합니다. `chrome-mv3-dev`는 개발용 빌드(핫 리로딩 지원), `chrome-mv3-prod`는 프로덕션용 빌드(최적화 및 압축) 결과물을 담습니다. 개발 시에는 이 디렉토리를 브라우저에 로드하여 테스트를 진행합니다. 이 디렉토리는 `.gitignore`에 의해 버전 관리에서 제외됩니다.

### 📄 `.gitignore`
**역할**: Git이 버전 관리를 할 때 추적하지 않을 파일 및 디렉토리 목록을 지정합니다.
**상세 설명**: `node_modules`, `build`, `.plasmo`와 같이 용량이 크거나, 자동으로 생성되거나, 민감한 정보를 포함할 수 있는 파일들을 Git 저장소에 포함시키지 않기 위해 사용됩니다. 이를 통해 저장소를 깨끗하고 가볍게 유지할 수 있습니다.

### 📄 `.prettierrc.mjs`
**역할**: Prettier 코드 포맷터의 설정 파일입니다.
**상세 설명**: 프로젝트 내 모든 코드의 스타일을 일관되게 유지하기 위한 규칙을 정의합니다. 예를 들어, 들여쓰기 칸 수, 세미콜론 사용 여부, 따옴표 종류 등을 설정할 수 있습니다. 모든 개발자가 동일한 코드 스타일을 따르도록 강제하여 코드 가독성을 높이고 불필요한 스타일 관련 논쟁을 방지합니다.

### 📄 `background.ts`
**역할**: 확장 프로그램의 "두뇌" 역할을 하는 백그라운드 스크립트입니다.
**상세 설명**: 브라우저가 실행되는 동안 백그라운드에서 지속적으로 실행되며, 눈에 보이지 않는 핵심 로직을 처리합니다. `content.tsx` 또는 `popup.tsx`로부터 메시지를 수신하고, `processAndShowMap` 함수를 통해 유튜브 URL을 기반으로 서버에 장소 추출 요청을 보냅니다. 로그인 상태를 확인하고, JWT 토큰을 사용하여 백엔드 서버에 인증된 요청을 보내거나, 비로그인 사용자를 위한 경로를 사용합니다. `chrome.storage`를 이용한 데이터의 영구 저장 및 관리(예: 사용자 핀 목록, 로그인 상태) 등도 담당합니다. 팝업이나 콘텐츠 스크립트와 메시지를 주고받으며 데이터 허브 역할을 수행합니다.

### 📄 `content.tsx` & `content.css`
**역할**: 실제 웹 페이지에 직접 삽입되어 페이지의 내용과 상호작용하는 콘텐츠 스크립트입니다.
**상세 설명**: `content.tsx`는 React 컴포넌트를 사용하여 웹 페이지의 DOM 위에 새로운 UI(예: 핀 추가 버튼, 특정 위치에 핀 모양 표시)를 렌더링합니다. 이제 로그인 상태를 확인하고, 로그인되어 있다면 `chrome.storage.local`에서 JWT 토큰을 읽어와 백그라운드 스크립트를 통해 백엔드 서버에 인증된 요청을 보냅니다. 페이지의 텍스트나 이미지를 읽어오거나, 페이지의 동작을 변경하는 등 웹 페이지와 가장 밀접하게 상호작용합니다. `content.css`는 이렇게 주입된 UI 요소들의 스타일을 정의하며, 웹 페이지 기존 스타일과 충돌하지 않도록 격리된 환경에서 적용됩니다.

### 📄 `global.d.ts`
**역할**: TypeScript 프로젝트 전역에서 사용될 타입 정의를 선언하는 파일입니다.
**상세 설명**: 특정 파일에서 `import` 하지 않아도 프로젝트의 모든 `.ts` 또는 `.tsx` 파일에서 인식될 수 있는 타입을 정의할 때 사용합니다. 예를 들어, `window` 객체에 새로운 속성을 추가하거나, 특정 형태의 데이터 구조를 전역 타입으로 정의하여 코드의 안정성과 재사용성을 높일 수 있습니다.

### 📄 `login.tsx` & `login.css`
**역할**: 사용자 인증과 관련된 모든 UI와 로직을 처리하는 핵심 컴포넌트입니다.
**상세 설명**: `login.tsx`는 단순한 로그인 폼을 넘어, **로그인**, **회원가입**, **비밀번호 찾기** 세 가지 모드를 동적으로 전환하는 다기능 모달(Modal) 컴포넌트입니다. 사용자의 선택에 따라 UI가 변경되며, 각 모드에 맞는 API 요청(로그인, 회원가입, 비밀번호 재설정 요청)을 백엔드 서버로 전송합니다. 인증 성공 시 서버로부터 발급받은 JWT 토큰을 `chrome.storage.local`에 저장하여 로그인 상태를 유지하며, **'로그인 없이 이용'** 옵션을 통해 제한된 기능에 접근할 수 있는 경로도 제공합니다. `login.css`는 이 다기능 인증 모달이 일관되고 깔끔한 디자인을 갖도록 스타일을 지정합니다.

### 📄 `package.json`
**역할**: 프로젝트의 모든 메타데이터와 의존성을 관리하는 핵심 설정 파일입니다.
**상세 설명**: 프로젝트의 이름, 버전, 설명과 같은 기본 정보와 함께, `react`, `plasmo` 등 프로덕션에 필요한 의존성(`dependencies`)과 `typescript`, `prettier` 등 개발에만 필요한 의존성(`devDependencies`)을 명시합니다. 또한 `pnpm dev`, `pnpm build`와 같이 자주 사용하는 명령어들을 `scripts` 항목에 단축 명령으로 등록하여 사용할 수 있습니다. `chrome.storage` 및 `chrome.notifications` API 사용을 위한 `permissions`도 여기에 정의됩니다.

### 📄 `pnpm-lock.yaml`
**역할**: 프로젝트 의존성의 정확한 버전과 의존성 트리를 기록하는 록(Lock) 파일입니다.
**상세 설명**: `pnpm install` 실행 시, `package.json`을 기반으로 설치된 모든 패키지(및 그 하위 패키지들)의 정확한 버전 정보가 이 파일에 고정됩니다. 이를 통해 다른 개발자나 CI/CD 환경에서도 항상 동일한 버전의 패키지를 설치하도록 보장하여, "내 컴퓨터에서는 됐는데..."와 같은 문제를 원천적으로 방지하는 매우 중요한 파일입니다.

### 📄 `popup.tsx` & `popup.css`
**역할**: 브라우저 툴바의 확장 프로그램 아이콘을 클릭했을 때 나타나는 팝업 창의 UI와 로직을 담당합니다.
**상세 설명**: `popup.tsx`는 팝업 창에 표시될 내용을 정의하는 React 컴포넌트입니다. 이제 `chrome.storage.local`에서 JWT 토큰을 확인하여 로그인 상태를 관리하고, 로그인되어 있지 않으면 로그인 모달을 표시합니다. 로그인 후 유튜브 영상 페이지에서 버튼을 클릭하면 `chrome.storage.local`에서 토큰을 읽어와 백그라운드 스크립트를 통해 백엔드 서버에 인증된 요청을 보냅니다. `popup.css`는 이 팝업 창의 디자인을 담당합니다.

### 📄 `tsconfig.json`
**역할**: TypeScript 컴파일러의 설정을 정의하는 파일입니다.
**상세 설명**: TypeScript 코드를 JavaScript 코드로 변환(컴파일)할 때 적용될 다양한 규칙을 명시합니다. 예를 들어, 어떤 버전의 JavaScript로 변환할지(`target`), JSX 문법을 어떻게 처리할지(`jsx`), 어떤 라이브러리의 타입을 기본으로 인식할지(`lib`), 엄격한 타입 검사를 사용할지(`strict`) 등을 설정합니다. Plasmo 프레임워크는 대부분의 최적 설정을 자동으로 제공합니다.

---

## 기여하기

Pind Plasmo 프로젝트에 대한 기여는 언제든지 환영합니다! 버그 보고, 기능 제안, 코드 개선 등 어떤 형태의 기여라도 좋습니다.
